{"ast":null,"code":"var _jsxFileName = \"/home/pablofdez/Desktop/RETRO_RepositorioMykell/frontProyectoRetro/src/MyActivity/ArticlesSold.js\",\n    _s = $RefreshSig$();\n\nimport { useNavigate } from 'react-router-dom';\nimport React, { Suspense, useEffect, useState } from 'react';\nimport './MyActivity.css';\nimport { useSelector } from 'react-redux';\nimport useFetch from \"fetch-suspense\";\nimport Loading from '../Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ArticlesSold() {\n  _s();\n\n  var _datosArticulos$;\n\n  const userToken = useSelector(s => s.user);\n  const navigate = useNavigate();\n  const [vote, setVote] = useState(0);\n  useEffect(() => {\n    !userToken && navigate('user/registre');\n  }, [userToken, navigate]);\n  const opts = {};\n\n  if (userToken !== null && userToken !== void 0 && userToken.token) {\n    opts.headers = {\n      'Authorization': 'Bearer ' + userToken.token\n    };\n  }\n\n  let datosArticulos;\n  datosArticulos = useFetch('http://localhost:3000/trading/userBuyer', opts);\n  if (!(userToken !== null && userToken !== void 0 && userToken.token)) datosArticulos = undefined;\n\n  const handleBuy = async _ref => {\n    let {\n      articleId\n    } = _ref;\n    console.log('hola');\n    const res = await fetch('http://localhost:3000/articles/sold', {\n      method: 'POST',\n      body: JSON.stringify({\n        articleId\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + (userToken === null || userToken === void 0 ? void 0 : userToken.token)\n      }\n    });\n\n    if (res.ok) {\n      window.location.reload(true);\n    } else {\n      console.log(res);\n    }\n  };\n\n  const handleSubmit = async (e, _ref2) => {\n    let {\n      idSeller,\n      articleId\n    } = _ref2;\n    e.preventDefault();\n    const res = await fetch('http://localhost:3000/votes/idVotedUser/votes', {\n      method: 'POST',\n      body: JSON.stringify({\n        idSeller,\n        vote,\n        articleId\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + (userToken === null || userToken === void 0 ? void 0 : userToken.token)\n      }\n    });\n    const res2 = await fetch('http://localhost:3000/trading/voted', {\n      method: 'POST',\n      body: JSON.stringify({\n        idSeller,\n        articleId\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + (userToken === null || userToken === void 0 ? void 0 : userToken.token)\n      }\n    });\n\n    if (res.ok) {\n      console.log(res);\n    } else {\n      console.log(res);\n    }\n\n    if (res2.ok) {\n      window.location.reload(true);\n    } else {\n      console.log(res2);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"soldBuy-activity\",\n    children: !datosArticulos[0].length ? /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"NO TIENES PRODUCTOS EN PROCESO DE COMPRA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this) : (_datosArticulos$ = datosArticulos[0]) === null || _datosArticulos$ === void 0 ? void 0 : _datosArticulos$.map((articulo, i) => {\n      var _datosArticulos$1$i$s, _datosArticulos$1$i$s2;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comercio-activity\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"MyArticle-activity\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"image-activity\",\n            src: `http://localhost:3000${articulo.photo.replace('./', '/')}`,\n            alt: articulo.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"myacti\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"myactivity-article-name\",\n              children: articulo.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"textMyArticle-activity\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"myactivity-article-price\",\n                children: [articulo.price, \" \\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"estado-activity\",\n          children: [datosArticulos[1][i].buy === 1 && articulo.buyerId && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Estado de la venta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 78\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2705 Vendido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 106\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 72\n          }, this), datosArticulos[1][i].buy === 1 && !articulo.buyerId && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"D\\xEDa de compra\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 78\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [(_datosArticulos$1$i$s = datosArticulos[1][i].saleDate) === null || _datosArticulos$1$i$s === void 0 ? void 0 : _datosArticulos$1$i$s.split('Z')[0].split('T')[0], ' ', (_datosArticulos$1$i$s2 = datosArticulos[1][i].saleDate) === null || _datosArticulos$1$i$s2 === void 0 ? void 0 : _datosArticulos$1$i$s2.split('Z')[0].split('T')[1].slice(0, -4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 101\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 73\n          }, this), datosArticulos[1][i].buy === 1 && !articulo.buyerId && new Date(datosArticulos[1][i].saleDate) < new Date() && handleBuy({\n            articleId: articulo.id\n          }), datosArticulos[1][i].buy === 1 && articulo.buyerId && datosArticulos[1][i].voted === null && /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => handleSubmit(e, {\n              idSeller: articulo.idUser,\n              articleId: articulo.id\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Punt\\xFAa al vendedor \\u2B07\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              class: \"clasificacion\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"radio1\",\n                type: \"radio\",\n                name: \"estrellas\",\n                value: \"5\",\n                onChange: e => setVote(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"radio1\",\n                children: \"\\u2605\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"radio2\",\n                type: \"radio\",\n                name: \"estrellas\",\n                value: \"4\",\n                onChange: e => setVote(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"radio2\",\n                children: \"\\u2605\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"radio3\",\n                type: \"radio\",\n                name: \"estrellas\",\n                value: \"3\",\n                onChange: e => setVote(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"radio3\",\n                children: \"\\u2605\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"radio4\",\n                type: \"radio\",\n                name: \"estrellas\",\n                value: \"2\",\n                onChange: e => setVote(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"radio4\",\n                children: \"\\u2605\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"radio5\",\n                type: \"radio\",\n                name: \"estrellas\",\n                value: \"1\",\n                onChange: e => setVote(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"radio5\",\n                children: \"\\u2605\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"buttonPuntua-activity\",\n              children: \"Enviar puntuaci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 19\n          }, this), datosArticulos[1][i].buy === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Estado de la venta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 58\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u274C Rechazado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 86\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 52\n          }, this), datosArticulos[1][i].buy === null && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Estado de la venta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 61\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Pendiente de respuesta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 89\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 55\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)]\n      }, articulo.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ArticlesSold, \"fHT4TzoRS9ZtrPxU+iCqVNy94NA=\", false, function () {\n  return [useSelector, useNavigate, useFetch];\n});\n\n_c = ArticlesSold;\n\nconst ArticlesBuyerWrapper = () => /*#__PURE__*/_jsxDEV(Suspense, {\n  fallback: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 23\n  }, this),\n  children: /*#__PURE__*/_jsxDEV(ArticlesSold, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 131,\n  columnNumber: 3\n}, this);\n\n_c2 = ArticlesBuyerWrapper;\nexport default ArticlesBuyerWrapper;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ArticlesSold\");\n$RefreshReg$(_c2, \"ArticlesBuyerWrapper\");","map":{"version":3,"sources":["/home/pablofdez/Desktop/RETRO_RepositorioMykell/frontProyectoRetro/src/MyActivity/ArticlesSold.js"],"names":["useNavigate","React","Suspense","useEffect","useState","useSelector","useFetch","Loading","ArticlesSold","userToken","s","user","navigate","vote","setVote","opts","token","headers","datosArticulos","undefined","handleBuy","articleId","console","log","res","fetch","method","body","JSON","stringify","ok","window","location","reload","handleSubmit","e","idSeller","preventDefault","res2","length","map","articulo","i","photo","replace","name","price","buy","buyerId","saleDate","split","slice","Date","id","voted","idUser","target","value","ArticlesBuyerWrapper"],"mappings":"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","sourcesContent":["import { useNavigate } from 'react-router-dom'\nimport React, { Suspense, useEffect, useState } from 'react'\nimport './MyActivity.css'\nimport { useSelector } from 'react-redux'\nimport  useFetch  from \"fetch-suspense\"\nimport Loading from '../Loading'\n\n\nfunction ArticlesSold() {\n  const userToken = useSelector(s => s.user)\n  const navigate = useNavigate()\n  const [vote, setVote] = useState(0)\n\n  useEffect(() => {\n    !userToken && navigate('user/registre')\n  }, [userToken, navigate])\n\n  const opts = {}\n\n  if (userToken?.token) {\n    opts.headers = { 'Authorization': 'Bearer ' + userToken.token }\n  }\n  let datosArticulos\n  datosArticulos = useFetch('http://localhost:3000/trading/userBuyer', opts)\n  if (!userToken?.token) datosArticulos = undefined\n\n  const handleBuy = async ({articleId}) => {\n    console.log('hola')\n    const res = await fetch('http://localhost:3000/articles/sold', {\n      method: 'POST',\n      body: JSON.stringify({articleId}),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + userToken?.token\n      }\n    })\n    if (res.ok) {\n      window.location.reload(true)\n    } else {\n      console.log(res)\n    }\n  }\n  const handleSubmit = async (e, {idSeller, articleId}) => {\n    e.preventDefault()\n\n    const res = await fetch('http://localhost:3000/votes/idVotedUser/votes', {\n      method: 'POST',\n      body: JSON.stringify({\n        idSeller,\n        vote,\n        articleId\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + userToken?.token\n      }\n    })\n    const res2 = await fetch('http://localhost:3000/trading/voted', {\n      method: 'POST',\n      body: JSON.stringify({\n        idSeller,\n        articleId\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + userToken?.token\n      }\n    })\n    if (res.ok) {\n      console.log(res)\n    } else {\n      console.log(res)\n    }\n    if (res2.ok) {\n      window.location.reload(true)\n    } else {\n      console.log(res2)\n    }\n  }\n\n  return (\n    <div className='soldBuy-activity'>\n      {\n        !datosArticulos[0].length ?\n        <span>NO TIENES PRODUCTOS EN PROCESO DE COMPRA</span>\n        :\n        datosArticulos[0]?.map((articulo, i) =>\n          <div key={articulo.id} className=\"comercio-activity\">\n            <div  className=\"MyArticle-activity\">\n                <img className=\"image-activity\" src={`http://localhost:3000${articulo.photo.replace('./', '/')}`} alt={articulo.name} />\n                <div className=\"myacti\">\n                  <h3 className=\"myactivity-article-name\">{articulo.name}</h3>\n                  <div className=\"textMyArticle-activity\">\n                      <h4 className=\"myactivity-article-price\">{articulo.price} €</h4>\n                  </div>\n                </div>\n            </div>\n            <div className='estado-activity'>\n              {(datosArticulos[1][i].buy === 1) && articulo.buyerId && <div> <h2>Estado de la venta</h2> <span>✅ Vendido</span> </div>}\n              {(datosArticulos[1][i].buy === 1) && !articulo.buyerId && <div><h2>Día de compra</h2> <p>{datosArticulos[1][i].saleDate?.split('Z')[0].split('T')[0]}{' '}{datosArticulos[1][i].saleDate?.split('Z')[0].split('T')[1].slice(0, -4)}</p> </div>}\n              {(datosArticulos[1][i].buy === 1) && !articulo.buyerId && new Date(datosArticulos[1][i].saleDate) < new Date() && handleBuy({articleId: articulo.id})}\n              {(datosArticulos[1][i].buy === 1) && articulo.buyerId && (datosArticulos[1][i].voted === null) &&\n                  <form onSubmit={(e) => handleSubmit(e,{idSeller:articulo.idUser, articleId: articulo.id})}>\n                    <h3>Puntúa al vendedor ⬇</h3>\n                    <p class=\"clasificacion\">\n                        <input id=\"radio1\" type=\"radio\" name=\"estrellas\" value=\"5\" onChange={e => setVote(e.target.value)}/>\n                        <label for=\"radio1\">★</label>\n                        <input id=\"radio2\" type=\"radio\" name=\"estrellas\" value=\"4\" onChange={e => setVote(e.target.value)}/>\n                        <label for=\"radio2\">★</label>\n                        <input id=\"radio3\" type=\"radio\" name=\"estrellas\" value=\"3\" onChange={e => setVote(e.target.value)}/>\n                        <label for=\"radio3\">★</label>\n                        <input id=\"radio4\" type=\"radio\" name=\"estrellas\" value=\"2\" onChange={e => setVote(e.target.value)}/>\n                        <label for=\"radio4\">★</label>\n                        <input id=\"radio5\" type=\"radio\" name=\"estrellas\" value=\"1\" onChange={e => setVote(e.target.value)}/>\n                        <label for=\"radio5\">★</label>\n                    </p>\n                    <button className='buttonPuntua-activity'>Enviar puntuación</button>\n                  </form>}\n              {(datosArticulos[1][i].buy === 0) && <div> <h2>Estado de la venta</h2> <span>❌ Rechazado</span> </div>}\n              {(datosArticulos[1][i].buy === null) && <div> <h2>Estado de la venta</h2> <span>Pendiente de respuesta</span> </div>}\n            </div>\n          </div>\n        )}\n    </div>\n  )\n}\n\n\n\nconst ArticlesBuyerWrapper = () =>\n  <Suspense fallback={<Loading />}>\n    <ArticlesSold />\n  </Suspense>\n\nexport default ArticlesBuyerWrapper"]},"metadata":{},"sourceType":"module"}