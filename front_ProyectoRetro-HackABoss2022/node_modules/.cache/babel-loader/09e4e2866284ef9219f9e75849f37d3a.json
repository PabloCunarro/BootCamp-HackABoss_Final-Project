{"ast":null,"code":"var _jsxFileName = \"/home/pablofdez/Desktop/RETRO_RepositorioMykell/frontProyectoRetro/src/MyActivity/ArticlesBuyer.js\",\n    _s = $RefreshSig$();\n\nimport { useNavigate } from 'react-router-dom';\nimport React, { Suspense, useEffect, useState } from 'react';\nimport './MyActivity.css';\nimport { useSelector } from 'react-redux';\nimport useFetch from \"fetch-suspense\";\nimport Loading from '../Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ArticlesBuyer() {\n  _s();\n\n  var _datosArticulos$;\n\n  const userToken = useSelector(s => s.user);\n  const navigate = useNavigate();\n  const [fecha, setFecha] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    !userToken && navigate('user/registre');\n  }, [userToken, navigate]);\n  const opts = {};\n\n  if (userToken !== null && userToken !== void 0 && userToken.token) {\n    opts.headers = {\n      'Authorization': 'Bearer ' + userToken.token\n    };\n  }\n\n  let datosArticulos;\n  datosArticulos = useFetch('http://localhost:3000/trading/userSeller', opts);\n  if (!(userToken !== null && userToken !== void 0 && userToken.token)) datosArticulos = undefined;\n\n  const handleSubmit = async (e, _ref) => {\n    let {\n      idArticle,\n      idBuyer,\n      location,\n      province\n    } = _ref;\n    setLoading(true);\n    e.preventDefault();\n    const date = new Date(fecha);\n    const date2 = new Date();\n\n    if (date > date2) {\n      const fechaHora = fecha.split('Z')[0].split('T');\n      const accept = {\n        idBuyer: idBuyer,\n        articleId: idArticle,\n        tradingInfo: {\n          buy: 1,\n          salePlace: location + ' ' + province,\n          saleDate: fechaHora[0],\n          saleHour: fechaHora[1] + ':00'\n        }\n      };\n      const res = await fetch('http://localhost:3000/trading/userSeller', {\n        method: 'POST',\n        body: JSON.stringify(accept),\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + (userToken === null || userToken === void 0 ? void 0 : userToken.token)\n        }\n      });\n\n      if (res.ok) {\n        window.location.reload(true);\n        setLoading(false);\n      } else {\n        console.log(res);\n        setLoading(false);\n      }\n    } else {\n      alert('fecha incorrecta');\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit2 = async (e, _ref2) => {\n    let {\n      idArticle,\n      idBuyer,\n      location,\n      province\n    } = _ref2;\n    setLoading(true);\n    e.preventDefault();\n    const noAccept = {\n      idBuyer: idBuyer,\n      articleId: idArticle,\n      tradingInfo: {\n        buy: 0,\n        salePlace: location + ' ' + province\n      }\n    };\n    const res = await fetch('http://localhost:3000/trading/userSeller', {\n      method: 'POST',\n      body: JSON.stringify(noAccept),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + (userToken === null || userToken === void 0 ? void 0 : userToken.token)\n      }\n    });\n\n    if (res.ok) {\n      window.location.reload(true);\n      setLoading(false);\n    } else {\n      console.log(res);\n      setLoading(false);\n    }\n  };\n\n  return loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"datauser-activity\",\n    children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 40\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"soldBuy-activity\",\n    children: !datosArticulos[0].length ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"myactivity-noproducts\",\n      children: \"TODAV\\xCDA NO TIENES PRODUCTOS EN FASE DE VENTA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this) : (_datosArticulos$ = datosArticulos[0]) === null || _datosArticulos$ === void 0 ? void 0 : _datosArticulos$.map((articulo, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comercio-activity\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"MyArticle-activity\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"image-activity\",\n          src: `http://localhost:3000${articulo.photo.replace('./', '/')}`,\n          alt: articulo.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: articulo.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"textMyArticle-activity\",\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [articulo.price, \" \\u20AC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"estado-activity\",\n        children: [datosArticulos[1][i].buy === 1 && articulo.buyerId && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Estado de la venta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 78\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u2705 Vendido\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 106\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 72\n        }, this), datosArticulos[1][i].buy === 1 && !articulo.buyerId && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"D\\xEDa de compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 78\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [datosArticulos[1][i].saleDate.split('Z')[0].split('T')[0], ' ', datosArticulos[1][i].saleDate.split('Z')[0].split('T')[1].slice(0, -4)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 101\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 73\n        }, this), datosArticulos[1][i].buy === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Estado de la venta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 58\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u274C Rechazado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 86\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 52\n        }, this), datosArticulos[1][i].buy === null && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Estado de la venta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => handleSubmit(e, {\n              idArticle: articulo.id,\n              idBuyer: datosArticulos[1][i].buyerId,\n              location: articulo.location,\n              province: articulo.province\n            }),\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"myactivity\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                required: true,\n                type: \"datetime-local\",\n                name: \"horareunion\",\n                onChange: e => setFecha(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"myactivity-button\",\n                children: \"Poner hora\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => handleSubmit2(e, {\n              idArticle: articulo.id,\n              idBuyer: datosArticulos[1][i].buyerId,\n              location: articulo.location,\n              province: articulo.province\n            }),\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"myactivity-button\",\n                children: \"No quiero vender\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 55\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this)]\n    }, articulo.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ArticlesBuyer, \"fsx0PPkpqac7FtAP0xYv6ZOMtXk=\", false, function () {\n  return [useSelector, useNavigate, useFetch];\n});\n\n_c = ArticlesBuyer;\n\nconst ArticlesBuyerWrapper = () => /*#__PURE__*/_jsxDEV(Suspense, {\n  fallback: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 23\n  }, this),\n  children: /*#__PURE__*/_jsxDEV(ArticlesBuyer, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 140,\n  columnNumber: 3\n}, this);\n\n_c2 = ArticlesBuyerWrapper;\nexport default ArticlesBuyerWrapper;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ArticlesBuyer\");\n$RefreshReg$(_c2, \"ArticlesBuyerWrapper\");","map":{"version":3,"sources":["/home/pablofdez/Desktop/RETRO_RepositorioMykell/frontProyectoRetro/src/MyActivity/ArticlesBuyer.js"],"names":["useNavigate","React","Suspense","useEffect","useState","useSelector","useFetch","Loading","ArticlesBuyer","userToken","s","user","navigate","fecha","setFecha","loading","setLoading","opts","token","headers","datosArticulos","undefined","handleSubmit","e","idArticle","idBuyer","location","province","preventDefault","date","Date","date2","fechaHora","split","accept","articleId","tradingInfo","buy","salePlace","saleDate","saleHour","res","fetch","method","body","JSON","stringify","ok","window","reload","console","log","alert","handleSubmit2","noAccept","length","map","articulo","i","photo","replace","name","price","buyerId","slice","id","target","value","ArticlesBuyerWrapper"],"mappings":"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","sourcesContent":["import { useNavigate } from 'react-router-dom'\nimport React, { Suspense, useEffect, useState } from 'react'\nimport './MyActivity.css'\nimport { useSelector } from 'react-redux'\nimport  useFetch  from \"fetch-suspense\"\nimport Loading from '../Loading'\n\n\n\nfunction ArticlesBuyer(){\n\n  const userToken = useSelector(s => s.user)\n  const navigate = useNavigate()\n  const [fecha, setFecha] = useState('')\n  const [loading, setLoading] = useState(false)\n  useEffect(() => {\n    !userToken && navigate('user/registre')\n  }, [userToken, navigate])\n\n  const opts = {}\n\n  if (userToken?.token) {\n    opts.headers = { 'Authorization': 'Bearer ' + userToken.token }\n  }\n\n  let datosArticulos\n  datosArticulos = useFetch('http://localhost:3000/trading/userSeller', opts)\n  if (!userToken?.token) datosArticulos = undefined\n\n\n  const handleSubmit = async (e, {idArticle, idBuyer, location, province}) => {\n    setLoading(true)\n    e.preventDefault()\n    const date = new Date(fecha)\n    const date2 = new Date()\n    if (date > date2) {\n      const fechaHora = fecha.split('Z')[0].split('T')\n      const accept = {\n        idBuyer: idBuyer,\n        articleId: idArticle,\n        tradingInfo : {\n            buy : 1,\n            salePlace: location + ' ' + province,\n            saleDate: fechaHora[0],\n            saleHour: fechaHora[1] + ':00'\n        }\n      }\n      const res = await fetch('http://localhost:3000/trading/userSeller', {\n        method: 'POST',\n        body: JSON.stringify(accept),\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + userToken?.token\n        }\n      })\n      if (res.ok) {\n        window.location.reload(true);\n        setLoading(false)\n      } else {\n        console.log(res)\n        setLoading(false)\n      }} else {\n        alert('fecha incorrecta')\n        setLoading(false)\n      }\n  }\n  const handleSubmit2 = async (e, {idArticle, idBuyer, location, province}) => {\n    setLoading(true)\n    e.preventDefault()\n    const noAccept = {\n      idBuyer: idBuyer,\n      articleId: idArticle,\n      tradingInfo : {\n          buy : 0,\n          salePlace: location + ' ' + province,\n      }\n  }\n    const res = await fetch('http://localhost:3000/trading/userSeller', {\n      method: 'POST',\n      body: JSON.stringify(noAccept),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + userToken?.token\n      }\n    })\n    if (res.ok) {\n      window.location.reload(true);\n      setLoading(false)\n    } else {\n      console.log(res)\n      setLoading(false)\n    }\n  }\n\n  return (\n    loading ?\n    <div className=\"datauser-activity\"><Loading /></div> :\n    <div className='soldBuy-activity'>\n      {\n        !datosArticulos[0].length ?\n        <span className=\"myactivity-noproducts\">TODAVÍA NO TIENES PRODUCTOS EN FASE DE VENTA</span>\n        :\n        datosArticulos[0]?.map((articulo, i) =>\n          <div key={articulo.id} className=\"comercio-activity\">\n            <div  className=\"MyArticle-activity\">\n                <img className=\"image-activity\" src={`http://localhost:3000${articulo.photo.replace('./', '/')}`} alt={articulo.name} />\n                <div>\n                  <h3>{articulo.name}</h3>\n                  <div className=\"textMyArticle-activity\">\n                      <h4>{articulo.price} €</h4>\n                  </div>\n                </div>\n            </div>\n            <div className='estado-activity'>\n              {(datosArticulos[1][i].buy === 1) && articulo.buyerId && <div> <h2>Estado de la venta</h2> <span>✅ Vendido</span> </div>}\n              {(datosArticulos[1][i].buy === 1) && !articulo.buyerId && <div><h2>Día de compra</h2> <p>{datosArticulos[1][i].saleDate.split('Z')[0].split('T')[0]}{' '}{datosArticulos[1][i].saleDate.split('Z')[0].split('T')[1].slice(0, -4)}</p> </div>}\n              {(datosArticulos[1][i].buy === 0) && <div> <h2>Estado de la venta</h2> <span>❌ Rechazado</span> </div>}\n              {(datosArticulos[1][i].buy === null) && <div>\n                  <h2>Estado de la venta</h2>\n                  <form onSubmit={(e)=> handleSubmit(e, {idArticle: articulo.id, idBuyer: datosArticulos[1][i].buyerId, location: articulo.location, province: articulo.province})}>\n                    <label className=\"myactivity\">\n                      <input required type=\"datetime-local\" name=\"horareunion\" onChange={(e)=> setFecha(e.target.value)} />\n                      <button className=\"myactivity-button\">Poner hora</button>\n                    </label>\n                  </form>\n                  <form onSubmit={(e)=> handleSubmit2(e, {idArticle: articulo.id, idBuyer: datosArticulos[1][i].buyerId, location: articulo.location, province: articulo.province})}>\n                    <label>\n                      <button className=\"myactivity-button\">No quiero vender</button>\n                    </label>\n                  </form>\n                </div>}\n            </div>\n          </div>\n        )}\n    </div>\n  )\n}\n\nconst ArticlesBuyerWrapper = () =>\n  <Suspense fallback={<Loading />}>\n    <ArticlesBuyer />\n  </Suspense>\n\nexport default ArticlesBuyerWrapper\n"]},"metadata":{},"sourceType":"module"}