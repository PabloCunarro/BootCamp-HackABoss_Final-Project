{"ast":null,"code":"var _jsxFileName = \"/home/pablofdez/Desktop/RETRO_RepositorioMykell/frontProyectoRetro/src/MyArticles/MyArticles.js\",\n    _s = $RefreshSig$();\n\nimport useFetch from \"fetch-suspense\";\nimport { Suspense, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Loading from \"../Loading\";\nimport './MyArticles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MyArticles() {\n  _s();\n\n  var _misArticulos;\n\n  const user = useSelector(s => s.user);\n  const navigate = useNavigate();\n  const opts = {};\n  useEffect(() => {\n    !user && navigate('/');\n  }, [user, navigate]);\n\n  if (user !== null && user !== void 0 && user.token) {\n    opts.headers = {\n      'Authorization': 'Bearer ' + user.token\n    };\n  }\n\n  let misArticulos;\n  misArticulos = useFetch('http://localhost:3000/articles/onSales', opts);\n  if (!(user !== null && user !== void 0 && user.token)) misArticulos = undefined;\n\n  const handleDelete = async _ref => {\n    let {\n      e,\n      id\n    } = _ref;\n    e.preventDefault();\n    const res = await fetch('http://localhost:3000/articles/' + id, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + (user === null || user === void 0 ? void 0 : user.token)\n      }\n    });\n\n    if (res.ok) {\n      window.location.reload(true);\n      alert('ARTICULO BORRADO');\n    } else {\n      console.log(res);\n      alert('UPSS INTENTALO MAS TARDE /' + res.status + '/' + res.statusText);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"my-articles\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"my-articles-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Mis Anuncios\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: '/user/article/create',\n          children: \"Crear Nuevo Anuncio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"casita-myarticles\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          class: \"casita\",\n          title: \"P\\xE1gina principal\",\n          href: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u2302 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 73\n          }, this), \"Volver a Home\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: !misArticulos.length ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"NO TIENES PRODUCTOS EN VENTA, CREA UN NUEVO ANUNCIO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this) : (_misArticulos = misArticulos) === null || _misArticulos === void 0 ? void 0 : _misArticulos.map(articulo => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"MyArticle\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"image\",\n          src: `http://localhost:3000${articulo.photo.replace('./', '/')}`,\n          alt: articulo.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: articulo.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"textMyArticle\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [articulo.price, \" euros\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"delete\",\n              onClick: e => handleDelete({\n                e,\n                id: articulo.id\n              }),\n              children: \"Eliminar anuncio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 33\n            }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"modify\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/user/article/modify/${articulo.id}`,\n                children: \"Modificar anuncio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 58\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this)]\n      }, articulo.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MyArticles, \"qFhLEx8Jfeyba185/Hyd1PB7k3U=\", false, function () {\n  return [useSelector, useNavigate, useFetch];\n});\n\n_c = MyArticles;\n\nconst MyArticlesWrapper = () => /*#__PURE__*/_jsxDEV(Suspense, {\n  fallback: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 23\n  }, this),\n  children: /*#__PURE__*/_jsxDEV(MyArticles, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 87,\n  columnNumber: 3\n}, this);\n\n_c2 = MyArticlesWrapper;\nexport default MyArticlesWrapper;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MyArticles\");\n$RefreshReg$(_c2, \"MyArticlesWrapper\");","map":{"version":3,"sources":["/home/pablofdez/Desktop/RETRO_RepositorioMykell/frontProyectoRetro/src/MyArticles/MyArticles.js"],"names":["useFetch","Suspense","useEffect","useSelector","Link","useNavigate","Loading","MyArticles","user","s","navigate","opts","token","headers","misArticulos","undefined","handleDelete","e","id","preventDefault","res","fetch","method","Authorization","ok","window","location","reload","alert","console","log","status","statusText","length","map","articulo","photo","replace","name","price","MyArticlesWrapper"],"mappings":"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","sourcesContent":["import  useFetch  from \"fetch-suspense\"\nimport { Suspense, useEffect } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { Link, useNavigate } from \"react-router-dom\"\nimport Loading from \"../Loading\"\nimport './MyArticles.css'\n\nfunction MyArticles () {\n    const user = useSelector(s => s.user)\n    const navigate = useNavigate()\n    const opts = {}\n\n\n    useEffect(() => {\n        !user && navigate('/')\n      }, [user, navigate])\n\n    if (user?.token) {\n        opts.headers = { 'Authorization': 'Bearer ' + user.token }\n    }\n\n    let misArticulos\n    misArticulos = useFetch('http://localhost:3000/articles/onSales', opts)\n    if (!user?.token) misArticulos = undefined\n\n\n    const handleDelete = async ({e, id}) => {\n        e.preventDefault()\n        const res = await fetch('http://localhost:3000/articles/' + id, {\n            method: 'DELETE',\n            headers:{Authorization: 'Bearer ' + user?.token}\n        })\n        if (res.ok) {\n            window.location.reload(true);\n            alert('ARTICULO BORRADO')\n          } else {\n            console.log(res)\n            alert('UPSS INTENTALO MAS TARDE /' + res.status + '/' + res.statusText)\n          }\n    }\n\n    return (\n        <div className=\"my-articles\">\n\n            <div className=\"my-articles-header\">\n                <h1>Mis Anuncios</h1>\n\n                <button><Link to={'/user/article/create'}>Crear Nuevo Anuncio</Link></button>\n\n                <div class=\"casita-myarticles\">\n                    <a class=\"casita\" title=\"Página principal\" href=\"/\"><span>⌂ </span>Volver a Home</a>\n                </div>\n            </div>\n\n            <div>\n                {\n                !misArticulos.length ?\n                <h1>NO TIENES PRODUCTOS EN VENTA, CREA UN NUEVO ANUNCIO</h1>\n                :\n                misArticulos?.map(articulo =>\n                    \n                   \n                    \n                    \n                    <div key={articulo.id} className=\"MyArticle\">\n                        <img className=\"image\" src={`http://localhost:3000${articulo.photo.replace('./', '/')}`} alt={articulo.name} />\n                       \n                        <h3>{articulo.name}</h3>\n                        <div className=\"textMyArticle\">\n                            <h4>{articulo.price} euros</h4>\n\n                            <div>\n                                <span className=\"delete\" onClick={(e) => handleDelete({e,id: articulo.id})}>Eliminar anuncio</span>\n                                {' '}\n                                <span className=\"modify\"><Link to={`/user/article/modify/${articulo.id}`}>Modificar anuncio</Link></span>\n                            </div>\n                        </div>\n                    </div>\n                    )}\n            </div>\n\n        </div>\n    )\n}\n\nconst MyArticlesWrapper = () =>\n  <Suspense fallback={<Loading />}>\n    <MyArticles />\n  </Suspense>\n\nexport default MyArticlesWrapper"]},"metadata":{},"sourceType":"module"}